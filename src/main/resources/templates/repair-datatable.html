<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>FOREST物业管理系统后台</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <!-- App favicon -->
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="stylesheet" type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/10.4.0/sweetalert2.min.css "/>
    <!-- third party css -->
    <link href="libs/datatables/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css"/>
    <link href="libs/datatables/responsive.bootstrap4.min.css" rel="stylesheet" type="text/css"/>
    <link href="libs/datatables/buttons.bootstrap4.min.css" rel="stylesheet" type="text/css"/>
    <link href="libs/datatables/select.bootstrap4.min.css" rel="stylesheet" type="text/css"/>

    <!-- App css -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="css/icons.min.css" rel="stylesheet" type="text/css"/>
    <link href="css/app.min.css" rel="stylesheet" type="text/css"/>
    <script src="js/jquery-3.5.1.min.js"></script>
    <style type="text/css">
        #eeeee {
            text-align: center;
        }

        #eeeee input {
            border: 1px #0d0f13 solid;
            margin-left: 40px;
            width: 70px;
            height: 40px;
            color: #4e555b;
            line-height: normal;
            text-align: center;
        }

        #selected {
            width: 200px;
            height: 40px;
            box-shadow: #5a6268;

        }

        #sbody {

        }

        #choiceWindow {
            display: none;
            position: absolute;
            top: 25%;
            left: 45%;
            width: 20%;
            height: 25%;
            padding: 20px;
            border: 3px solid #ccc;
            background-color: white;
            z-index: 2;
            overflow: auto;
            font-size: 25px;
        }

        #backGround {
            display: none;
            position: absolute;
            top: 0%;
            left: 0%;
            width: 100%;
            height: 1100px;
            background-color: black;
            z-index: 1;
            -moz-opacity: 0.8;
            opacity: .80;
            filter: alpha(opacity=88);
        }

        #x:hover {
            cursor: pointer;
            color: rgb(55, 198, 192);
        }

    </style>
    <link rel="stylesheet" href="css/pop.css">
</head>

<body>

<!-- Begin page -->
<div id="wrapper">

    <!-- Topbar Start -->
    <div class="navbar-custom">
        <ul class="list-unstyled topnav-menu float-right mb-0">

            <li class="dropdown d-none d-lg-block">
                <a class="nav-link dropdown-toggle mr-0 waves-effect waves-light" data-toggle="dropdown" href="#"
                   role="button" aria-haspopup="false" aria-expanded="false">
                    <img src="images/flags/us.jpg" alt="user-image" class="mr-1" height="12"> <span
                        class="align-middle">English <i class="mdi mdi-chevron-down"></i> </span>
                </a>
                <div class="dropdown-menu dropdown-menu-right">

                    <!-- item-->
                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                        <img src="images/flags/spain.jpg" alt="user-image" class="mr-1" height="12"> <span
                            class="align-middle">Spanish</span>
                    </a>

                    <!-- item-->
                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                        <img src="images/flags/germany.jpg" alt="user-image" class="mr-1" height="12"> <span
                            class="align-middle">German</span>
                    </a>

                    <!-- item-->
                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                        <img src="images/flags/italy.jpg" alt="user-image" class="mr-1" height="12"> <span
                            class="align-middle">Italian</span>
                    </a>

                    <!-- item-->
                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                        <img src="images/flags/russia.jpg" alt="user-image" class="mr-1" height="12"> <span
                            class="align-middle">Russian</span>
                    </a>

                </div>
            </li>

            <li class="dropdown notification-list">
                <a class="nav-link dropdown-toggle waves-effect waves-light" data-toggle="dropdown" href="#"
                   role="button" aria-haspopup="false" aria-expanded="false">
                    <i class="dripicons-inbox mail-icon"></i>
                    <span class="badge badge-info noti-icon-badge">20</span>
                </a>
                <div class="dropdown-menu dropdown-menu-right dropdown-lg">

                    <!-- item-->
                    <div class="dropdown-item noti-title">
                        <h5 class="m-0">
                                    <span class="float-right">
                                        <a href="" class="text-dark">
                                            <small>Clear All</small>
                                        </a>
                                    </span>20 New Messages
                        </h5>
                    </div>

                    <div class="slimscroll noti-scroll">

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item active">
                            <div class="notify-icon"><img src="images/users/avatar-1.jpg"
                                                          class="img-fluid rounded-circle" alt=""/></div>
                            <p class="notify-details">Sandra Smith
                                <small class="text-muted">Hey ! I'm working on your project</small>
                            </p>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item">
                            <div class="notify-icon"><img src="images/users/avatar-2.jpg"
                                                          class="img-fluid rounded-circle" alt=""/></div>
                            <p class="notify-details">Amily Lee
                                <small class="text-muted">Hi, How are you? What about our next meeting?</small>
                            </p>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item">
                            <div class="notify-icon">
                                <img src="images/users/avatar-3.jpg" class="img-fluid rounded-circle" alt=""/></div>
                            <p class="notify-details">David Boos</p>
                            <p class="text-muted mb-0 user-msg">
                                <small>What about our next meeting</small>
                            </p>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item">
                            <div class="notify-icon"><img src="images/users/avatar-4.jpg"
                                                          class="img-fluid rounded-circle" alt=""/></div>
                            <p class="notify-details">Christopher Palmer
                                <small class="text-muted">Waiting for your Response...</small>
                            </p>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item">
                            <div class="notify-icon">
                                <img src="images/users/avatar-5.jpg" class="img-fluid rounded-circle" alt=""/></div>
                            <p class="notify-details">Malika Roy</p>
                            <p class="text-muted mb-0 user-msg">
                                <small>Wow that's great</small>
                            </p>
                        </a>
                    </div>

                    <!-- All-->
                    <a href="javascript:void(0);" class="dropdown-item text-center text-primary notify-item notify-all">
                        View all
                        <i class="fi-arrow-right"></i>
                    </a>

                </div>
            </li>

            <li class="dropdown notification-list">
                <a class="nav-link dropdown-toggle waves-effect waves-light" data-toggle="dropdown" href="#"
                   role="button" aria-haspopup="false" aria-expanded="false">
                    <i class="dripicons-bell noti-icon"></i>
                    <span class="badge badge-danger noti-icon-badge">35</span>
                </a>
                <div class="dropdown-menu dropdown-menu-right dropdown-lg">

                    <!-- item-->
                    <div class="dropdown-item noti-title">
                        <h5 class="m-0">
                                    <span class="float-right">
                                        <a href="" class="text-dark">
                                            <small>Clear All</small>
                                        </a>
                                    </span>Notification
                        </h5>
                    </div>

                    <div class="slimscroll noti-scroll">

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item">
                            <div class="notify-icon bg-info"><i class="mdi mdi-cloud-upload-outline"></i></div>
                            <p class="notify-details">Your upload has been approved
                                <small class="text-muted">5 hours ago</small>
                            </p>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item active">
                            <div class="notify-icon bg-success"><i class="mdi mdi-map-marker-check"></i></div>
                            <p class="notify-details">You added your Location
                                <small class="text-muted">Just Now</small>
                            </p>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item">
                            <div class="notify-icon bg-primary"><i class="mdi mdi-layers-remove"></i></div>
                            <p class="notify-details">Your item is shipped
                                <small class="text-muted">It is a long established fact that a reader will</small>
                            </p>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item">
                            <div class="notify-icon bg-purple"><i class="mdi mdi-check-bold"></i></div>
                            <p class="notify-details">Your order is placed
                                <small class="text-muted">Dummy text of the printing and typesetting industry.</small>
                            </p>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item">
                            <div class="notify-icon bg-warning">
                                <i class="mdi mdi-alert-outline"></i>
                            </div>
                            <p class="notify-details">Your Subscription Expired
                                <small class="text-muted">1 days ago</small>
                            </p>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item">
                            <div class="notify-icon bg-danger">
                                <i class="mdi mdi-settings"></i>
                            </div>
                            <p class="notify-details"><b>Devid</b>, You changed your Settings
                                <small class="text-muted">5 days ago</small>
                            </p>
                        </a>
                    </div>

                    <!-- All-->
                    <a href="javascript:void(0);" class="dropdown-item text-center text-primary notify-item notify-all">
                        View all
                        <i class="fi-arrow-right"></i>
                    </a>

                </div>
            </li>

            <li class="dropdown notification-list">
                <a class="nav-link dropdown-toggle nav-user mr-0 waves-effect waves-light" data-toggle="dropdown"
                   href="#" role="button" aria-haspopup="false" aria-expanded="false">
                    <img src="images/users/avatar-1.jpg" alt="user-image" class="rounded-circle">
                    <span class="pro-user-name ml-1" id="name">
                                <i class="mdi mdi-chevron-down"></i>
                            </span>
                </a>
                <div class="dropdown-menu dropdown-menu-right profile-dropdown ">
                    <!-- item-->
                    <div class="dropdown-item noti-title">
                        <h6 class="m-0" id="name1">

                        </h6>
                    </div>

                    <!-- item-->
                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                        <i class="dripicons-user"></i>
                        <span>我的信息</span>
                    </a>

                    <!-- item-->
                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                        <i class="dripicons-card"></i>
                        <span>My Wallet</span>
                    </a>

                    <!-- item-->
                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                        <i class="dripicons-gear"></i>
                        <span>设置信息</span>
                    </a>

                    <div class="dropdown-divider"></div>

                    <!-- item-->
                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                        <i class="dripicons-power"></i>
                        <span onclick="tuichu(this)">退出登录</span>
                    </a>

                </div>
            </li>

        </ul>

        <ul class="list-unstyled menu-left mb-0">
            <li class="float-left">
                <a href="index.html" class="logo">
                            <span class="logo-lg">
                                <img src="assets/images/logo.png" alt="" height="35"></span>
                    <span class="logo-sm">
                                <img src="assets/images/logo.png" alt="" height="34">
                            </span>
                </a>
            </li>
            <li class="float-left">
                <a class="button-menu-mobile navbar-toggle">
                    <div class="lines">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </a>
            </li>
            <li class="app-search d-none d-md-block">
                <form class="form-inline">
                    <input type="text" class="form-control" placeholder="请输入用户姓名" id="sousuo">
                    <button class="btn btn-primary-color" type="submit" onclick="sousuo1(this)"><i
                            class="fa fa-search"></i></button>
                </form>
            </li>
        </ul>
    </div>
    <!-- end Topbar -->

    <div class="left-side-menu">

        <div class="slimscroll-menu">

            <!--- Sidemenu -->
            <div id="sidebar-menu">

                <ul class="metismenu" id="side-menu">


                    <div class="left-user">
                        <div class="user-box">
                            <div class="user-img">
                                <img src="images/users/avatar-1.jpg" alt="user-img" title="Mat Helme"
                                     class="rounded-circle img-fluid">
                                <a href="javascript:void(0);" class="user-edit"><i class="mdi mdi-pencil"></i></a>
                            </div>

                            <h5><a href="javascript: void(0);">欢迎您</a></h5>
                            <p class="text-muted mb-0">
                                <small id="admin"></small>
                            </p>
                        </div>
                    </div>

                    <li>
                        <a href="index.html">
                            <i class="dripicons-device-desktop"></i>
                            <span>系统分析</span>
                        </a>
                    </li>

                    <li>
                        <a href="javascript: void(0);">
                            <i class="dripicons-view-apps"></i>
                            <span> 界面布局 </span>
                            <span class="menu-arrow"></span>
                        </a>
                        <ul class="nav-second-level" aria-expanded="false">
                            <li>
                                <a href="layouts-dark-header.html">深色标题</a>
                            </li>
                            <li>
                                <a href="layouts-sidebar-collapsed.html">搜索侧栏</a>
                            </li>
                            <li>
                                <a href="layouts-dark-sidebar.html">深色侧栏</a>
                            </li>
                            <li>
                                <a href="layouts-small-sidebar.html">小型侧栏</a>
                            </li>
                            <li>
                                <a href="layouts-boxed.html">方框布局</a>
                            </li>
                        </ul>
                    </li>

                    <li>
                        <a href="tables-datatable.html">
                            <i class="dripicons-calendar"></i> <span> 业主信息 </span><span class="menu-arrow"></span>
                        </a>
                    </li>
                    <li>
                        <a href="room-datatable.html">
                            <i class="dripicons-briefcase"></i>
                            <span> 住房信息 </span>
                            <span class="menu-arrow"></span>
                        </a>
                    </li>
                    <li>
                        <a href="javascript: void(0);">
                            <i class="dripicons-view-list"></i>
                            <span> 车辆信息 </span>
                            <span class="menu-arrow"></span>
                        </a>
                        <ul class="nav-second-level" aria-expanded="false">
                            <li>
                                <a href="car-datatable.html">基本信息</a>
                            </li>
                            <li>
                                <a href="travelrecord-datatable.html">出行记录</a>
                            </li>
                        </ul>
                    </li>


                    <li>
                        <a href="order-datatable.html">
                            <i class="dripicons-graph-pie"></i>
                            <span> 收费管理 </span>
                            <span class="menu-arrow"></span>
                        </a>
                    </li>

                    <li>
                        <a href="repair-datatable.html">
                            <i class="dripicons-document"></i>
                            <span> 维修管理 </span>
                            <span class="menu-arrow"></span>
                        </a>
                    </li>

                    <li>
                        <a href="customer-datatable.html">
                            <i class="dripicons-map"></i>
                            <span> 客服管理 </span>
                            <span class="menu-arrow"></span>
                        </a>
                    </li>
                    <li>
                        ______________________________________
                    </li>
                    <li>
                        <a href="xtYongUser-datatable.html">
                            <i class="dripicons-user"></i>
                            <span> 员工管理</span>
                            <span class="menu-arrow"></span>
                        </a>
                    </li>

                    <li>
                        <a href="flower-datatable.html">
                            <i class="dripicons-star"></i>
                            <span> 楼盘管理 </span>
                            <span class="menu-arrow"></span>
                        </a>
                    </li>

                    <li>
                        <a href="complaint-datatable.html">
                            <i class="dripicons-duplicate"></i>
                            <span>投诉管理 </span>
                            <span class="menu-arrow"></span>
                        </a>
                    </li>

                </ul>

            </div>
            <!-- End Sidebar -->

            <div class="clearfix"></div>

        </div>
        <!-- Sidebar -left -->

    </div>
    <!-- Left Sidebar End -->

    <!-- ============================================================== -->
    <!-- Start Page Content here -->
    <!-- ============================================================== -->

    <div class="content-page">
        <div class="content">

            <!-- Start Content-->
            <div class="container-fluid">

                <!-- start page title -->
                <div class="row">
                    <div class="col-12">
                        <div class="page-title-box">
                            <div class="page-title-right">
                                <ol class="breadcrumb m-0">
                                    <li class="breadcrumb-item"><a href="javascript: void(0);">修理信息</a></li>
                                    <li class="breadcrumb-item"><a href="javascript: void(0);">信息界面</a></li>
                                </ol>
                            </div>
                            <h4 class="page-title">维修信息</h4>
                        </div>
                    </div>
                </div>
                <!-- end page title -->

                <div class="row">
                    <div class="col-12">
                        <div class="card-box">
                            <h4 class="header-title">信息界面</h4>
                            <p class="sub-header">
                                请谨慎操作！！注意维修信息
                            </p>
                            <p>
                                <select id="selected">
                                    <option selected="selected">20</option>
                                    <option>50</option>
                                    <option>100</option>
                                </select>
                                <img src="assets/首页.jpg" height="25" id="btn1" width="25">
                            </p>
                            <table id="datatable" class="table table-bordered dt-responsive nowrap">
                                <tr>
                                    <th>维修编号</th>
                                    <th>维修图片</th>
                                    <th>业主姓名</th>
                                    <th>业主电话</th>
                                    <th>业主邮件</th>
                                    <th>维修标题</th>
                                    <th>维修详情</th>
                                    <th>维修状态</th>
                                    <th>维修时间</th>
                                    <th>操作</th>
                                </tr>

                                <tbody id="sbody">

                                </tbody>
                            </table>
                        </div> <!-- end card-box -->
                    </div> <!-- end col -->
                </div> <!-- end row -->
            </div> <!-- container-fluid -->
        </div> <!-- content -->
        <!-- Footer Start -->
        <footer class="footer">
            <div id="eeeee">

            </div>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12 text-center">
                        2020 © Dashboard Theme By <a href="index.html">Forest</a>
                    </div>
                </div>
            </div>
        </footer>
        <!-- end Footer -->


        <!-- ============================================================== -->
        <!-- End Page content -->
        <!-- ============================================================== -->
    </div>
    <!-- END wrapper -->

    <!-- Vendor js -->
    <script src="js/vendor.min.js"></script>

    <!-- datatable js -->
    <script src="libs/datatables/jquery.dataTables.min.js"></script>
    <script src="libs/datatables/dataTables.bootstrap4.min.js"></script>
    <script src="libs/datatables/dataTables.responsive.min.js"></script>
    <script src="libs/datatables/responsive.bootstrap4.min.js"></script>

    <script src="libs/datatables/dataTables.buttons.min.js"></script>
    <script src="libs/datatables/buttons.bootstrap4.min.js"></script>
    <script src="libs/datatables/buttons.html5.min.js"></script>
    <script src="libs/datatables/buttons.flash.min.js"></script>
    <script src="libs/datatables/buttons.print.min.js"></script>

    <script src="libs/datatables/dataTables.keyTable.min.js"></script>
    <script src="libs/datatables/dataTables.select.min.js"></script>

    <!-- Datatables init -->
    <script src="js/pages/datatables.init.js"></script>

    <!-- App js -->
    <script src="js/app.min.js"></script>
    <script src="js/pop.js"></script>
    <div id="container"></div>
</body>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/10.4.0/sweetalert2.min.js "></script>

<script type="text/javascript">

    //加载业主信息
    function loadstu() {
        var data = {
            "size": $("#selected").val(),
            "num": 0
        };
        $.ajax({
            url: "repairSelectEmployee",
            type: "POST",
            dataType: "json",
            contentType: 'application/json;charset=utf-8',
            data: JSON.stringify(data),
            success: function (data) {
                if (data.code == 500) {
                    window.location.href = "http://localhost:8080/forest/pages-login.html";
                } else {
                    var str1 = null;
                    for (var i = 0; i < data.num; i++) {
                        str1 += "<input type='button' value=" + (i + 1) + " onclick='dos(" + i + ",this)'>";
                    }
                    var str = null;
                    for (var i = 0; i < data.repair.length; i++) {
                        if (data.repair[i].repairState == 1) {
                            var States = "尚未处理";
                        } else if (data.repair[i].repairState == 2) {
                            var States = "正在处理";
                        } else {
                            var States = "处理完成";
                        }
                        str += "<tr>";
                        str += "<td>" + (i + 1) + "</td>";
                        str += "<td id='www'> <img src='upload/" + data.repair[i].repairImage + "'  width='30px' height='20px'/></td>";
                        str += "<td>" + data.repair[i].message.yeZhuName + "</td>";
                        str += "<td>" + data.repair[i].message.yeZhuPhone + "</td>";
                        str += "<td>" + data.repair[i].message.yeZhuEmail + "</td>";
                        str += "<td>" + data.repair[i].repairMessage + "</td>";
                        if (data.repair[i].repairDetail.length < 10) {
                            str += "<td>" + data.repair[i].repairDetail + "</td>";
                        } else {
                            str += "<td>" + data.repair[i].repairDetail.substring(0, 10) + "...</td>";
                        }
                        str += "<td>" + States + "</td>";
                        str += "<td>" + data.repair[i].shenQingShiJian + "</td>";
                        if (data.repair[i].repairState == 1) {
                            str += "<td class=\"text-center\"><a href=\"javascript:void(0);\"  onclick='updateAgo(" + data.repair[i].message.yeZhuID + "," + data.repair[i].repairID + ",this)' class=\"badge-danger btn-sm mg-y-5\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"\" data-original-title=\"Edit\"><i>正在处理</i></a></td>";
                        } else if (data.repair[i].repairState == 2) {
                            str += "<td class=\"text-center\"><a href=\"javascript:void(0);\"  onclick='updateAfter(" + data.repair[i].message.yeZhuID + "," + data.repair[i].repairID + ",this)' class=\"badge-info btn-sm mg-y-5\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"\" data-original-title=\"Delete\"><i>处理完成</i></a></td>";
                        } else {
                            str += "<td class=\"text-center\"></td>";
                        }
                        str += "</tr>";
                    }
                }
                $("#sbody").empty();
                $("#sbody").append(str);
                $("#eeeee").html(str1);
                $("#name").html(data.name);
                $("#name1").html(data.name);
                $("#admin").html(data.name);
            }
        });
    }

    //分页查询
    function dos(id) {
        var data = {
            "size": $("#selected").val(),
            "num": id
        };
        $.ajax({
            url: "repairSelectEmployee",
            type: "POST",
            dataType: "json",
            contentType: 'application/json;charset=utf-8',
            data: JSON.stringify(data),
            success: function (data) {
                if (data.code == 500) {
                    window.location.href = "http://localhost:8080/forest/pages-login.html";
                } else {
                    var str1 = null;
                    for (var i = 0; i < data.num; i++) {
                        str1 += "<input type='button' value=" + (i + 1) + " onclick='dos(" + i + ",this)'>";
                    }
                    var str = null;
                    for (var i = 0; i < data.repair.length; i++) {
                        if (data.repair[i].repairState == 1) {
                            var States = "尚未处理";
                        } else if (data.repair[i].repairState == 2) {
                            var States = "正在处理";
                        } else {
                            var States = "处理完成";
                        }
                        str += "<tr>";
                        str += "<td>" + (i + 1) + "</td>";
                        str += "<td id='www'> <img src='upload/" + data.repair[i].repairImage + "'  width='30px' height='20px'/></td>";
                        str += "<td>" + data.repair[i].message.yeZhuName + "</td>";
                        str += "<td>" + data.repair[i].message.yeZhuPhone + "</td>";
                        str += "<td>" + data.repair[i].message.yeZhuEmail + "</td>";
                        str += "<td>" + data.repair[i].repairMessage + "</td>";
                        if (data.repair[i].repairDetail.length < 10) {
                            str += "<td>" + data.repair[i].repairDetail + "</td>";
                        } else {
                            str += "<td>" + data.repair[i].repairDetail.substring(0, 10) + "...</td>";
                        }
                        str += "<td>" + States + "</td>";
                        str += "<td>" + data.repair[i].shenQingShiJian + "</td>";
                        if (data.repair[i].repairState == 1) {
                            str += "<td class=\"text-center\"><a href=\"javascript:void(0);\"  onclick='updateago(" + data.repair[i].message.yeZhuID + "," + data.repair[i].repairID + ",this)' class=\"badge-danger btn-sm mg-y-5\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"\" data-original-title=\"Edit\"><i>正在处理</i></a></td>";
                        } else if (data.repair[i].repairState == 2) {
                            str += "<td class=\"text-center\"><a href=\"javascript:void(0);\"  onclick='updateAfter(" + data.repair[i].message.yeZhuID + "," + data.repair[i].repairID + ",this)' class=\"badge-info btn-sm mg-y-5\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"\" data-original-title=\"Delete\"><i>处理完成</i></a></td>";
                        } else {
                            str += "<td class=\"text-center\"></td>";
                        }
                        str += "</tr>";
                    }
                }
                $("#sbody").empty();
                $("#sbody").append(str);
                $("#eeeee").html(str1);
                $("#name").html(data.name);
                $("#name1").html(data.name);
            }
        });
    }

    //当更改数据时
    $("#selected").blur(function () {
        loadstu();
    });
    //修改正在处理
    function updateAgo(yeZhuID,repairID)
    {
        var data={
            "yeZhuID":yeZhuID,
            "repairID":repairID,
            "repairState":2
        };
        $.ajax({
            url: "repairUpdatePrimarySelective",
            type: "POST",
            dataType: "json",
            contentType: 'application/json;charset=utf-8',
            data: JSON.stringify(data),
            async: true,
            success: function (data) {
                if (data.code == 200) {
                    loadstu();
                } else {
                    Swal.fire("提示", "不存在该数据", "error");
                }
            }
        })
    }

    //修改处理完成
    function updateAfter(yeZhuID,repairID)
    {
        var data={
            "yeZhuID":yeZhuID,
            "repairID":repairID,
            "repairState":3
        };
        $.ajax({
            url: "repairUpdatePrimarySelective",
            type: "POST",
            dataType: "json",
            contentType: 'application/json;charset=utf-8',
            data: JSON.stringify(data),
            async: true,
            success: function (data) {
                if (data.code == 200) {
                    loadstu();
                } else {
                    Swal.fire("提示", "不存在该数据", "error");
                }
            }
        })
    }

    //首页
    $("#btn1").click(function () {
        loadstu();
    });

    //搜索
    function sousuo1() {
        var data = {
            "name": $("#sousuo").val(),
            "size": $("#selected").val(),
            "num": 0
        };
        $.ajax({
            url: "repairSelectEmployee",
            type: "POST",
            dataType: "json",
            contentType: 'application/json;charset=utf-8',
            data: JSON.stringify(data),
            success: function (data) {
                if (data.code == 500) {
                    window.location.href = "http://localhost:8080/forest/pages-login.html";
                } else {
                    var str1 = null;
                    for (var i = 0; i < data.num; i++) {
                        str1 += "<input type='button' value=" + (i + 1) + " onclick='sousuo(" + i + ",this)'>";
                    }
                    var str = null;
                    for (var i = 0; i < data.repair.length; i++) {
                        if (data.repair[i].repairState == 1) {
                            var States = "尚未处理";
                        } else if (data.repair[i].repairState == 2) {
                            var States = "正在处理";
                        } else {
                            var States = "处理完成";
                        }
                        str += "<tr>";
                        str += "<td>" + (i + 1) + "</td>";
                        str += "<td id='www'> <img src='upload/" + data.repair[i].repairImage + "'  width='30px' height='20px'/></td>";
                        str += "<td>" + data.repair[i].message.yeZhuName + "</td>";
                        str += "<td>" + data.repair[i].message.yeZhuPhone + "</td>";
                        str += "<td>" + data.repair[i].message.yeZhuEmail + "</td>";
                        str += "<td>" + data.repair[i].repairMessage + "</td>";
                        if (data.repair[i].repairDetail.length < 10) {
                            str += "<td>" + data.repair[i].repairDetail + "</td>";
                        } else {
                            str += "<td>" + data.repair[i].repairDetail.substring(0, 10) + "...</td>";
                        }
                        str += "<td>" + States + "</td>";
                        str += "<td>" + data.repair[i].shenQingShiJian + "</td>";
                        if (data.repair[i].repairState == 1) {
                            str += "<td class=\"text-center\"><a href=\"javascript:void(0);\"  onclick='updateAgo(" + data.repair[i].message.yeZhuID + "," + data.repair[i].repairID + ",this)' class=\"badge-danger btn-sm mg-y-5\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"\" data-original-title=\"Edit\"><i>正在处理</i></a></td>";
                        } else if (data.repair[i].repairState == 2) {
                            str += "<td class=\"text-center\"><a href=\"javascript:void(0);\"  onclick='updateAfter(" + data.repair[i].message.yeZhuID + "," + data.repair[i].repairID + ",this)' class=\"badge-info btn-sm mg-y-5\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"\" data-original-title=\"Delete\"><i>处理完成</i></a></td>";
                        } else {
                            str += "<td class=\"text-center\"></td>";
                        }
                        str += "</tr>";
                    }
                }
                $("#sbody").empty();
                $("#sbody").append(str);
                $("#eeeee").html(str1);
                $("#name").html(data.name);
                $("#name1").html(data.name);
            }
        });
    }

    //加载业主信息 1
    $("#sousuo").blur(function () {
        sousuo1();
    });

    //退出
    function tuichu() {
        $.ajax({
            url: "tuiChu",
            type: "POST",
            dataType: "json",
            contentType: 'application/json;charset=utf-8',
            success: function (data) {
                window.location.href = "http://localhost:8080/forest/pages-login.html";
            }
        });
    }

    //分页查询 1
    function sousuo(id) {
        var data = {
            "name": $("#sousuo").val(),
            "size": $("#selected").val(),
            "num": id
        };
        $.ajax({
            url: "repairSelectEmployee",
            type: "POST",
            dataType: "json",
            contentType: 'application/json;charset=utf-8',
            data: JSON.stringify(data),
            success: function (data) {
                if (data.code == 500) {
                    window.location.href = "http://localhost:8080/forest/pages-login.html";
                } else {
                    var str1 = null;
                    for (var i = 0; i < data.num; i++) {
                        str1 += "<input type='button' value=" + (i + 1) + " onclick='sousuo(" + i + ",this)'>";
                    }
                    var str = null;
                    for (var i = 0; i < data.repair.length; i++) {
                        if (data.repair[i].repairState == 1) {
                            var States = "尚未处理";
                        } else if (data.repair[i].repairState == 2) {
                            var States = "正在处理";
                        } else {
                            var States = "处理完成";
                        }
                        str += "<tr>";
                        str += "<td>" + (i + 1) + "</td>";
                        str += "<td id='www'> <img src='upload/" + data.repair[i].repairImage + "'  width='30px' height='20px'/></td>";
                        str += "<td>" + data.repair[i].message.yeZhuName + "</td>";
                        str += "<td>" + data.repair[i].message.yeZhuPhone + "</td>";
                        str += "<td>" + data.repair[i].message.yeZhuEmail + "</td>";
                        str += "<td>" + data.repair[i].repairMessage + "</td>";
                        if (data.repair[i].repairDetail.length < 10) {
                            str += "<td>" + data.repair[i].repairDetail + "</td>";
                        } else {
                            str += "<td>" + data.repair[i].repairDetail.substring(0, 10) + "...</td>";
                        }
                        str += "<td>" + States + "</td>";
                        str += "<td>" + data.repair[i].shenQingShiJian + "</td>";
                        if (data.repair[i].repairState == 1) {
                            str += "<td class=\"text-center\"><a href=\"javascript:void(0);\"  onclick='updateAgo(" + data.repair[i].message.yeZhuID + "," + data.repair[i].repairID + ",this)' class=\"badge-danger btn-sm mg-y-5\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"\" data-original-title=\"Edit\"><i>正在处理</i></a></td>";
                        } else if (data.repair[i].repairState == 2) {
                            str += "<td class=\"text-center\"><a href=\"javascript:void(0);\"  onclick='updateAfter(" + data.repair[i].message.yeZhuID + "," + data.repair[i].repairID + ",this)' class=\"badge-info btn-sm mg-y-5\" data-toggle=\"tooltip\" data-placement=\"top\" title=\"\" data-original-title=\"Delete\"><i>处理完成</i></a></td>";
                        } else {
                            str += "<td class=\"text-center\"></td>";
                        }
                        str += "</tr>";
                    }
                }
                $("#sbody").empty();
                $("#sbody").append(str);
                $("#eeeee").html(str1);
                $("#name").html(data.name);
                $("#name1").html(data.name);
            }
        });
    }

    $(function () {
        //调用加载数据函数
        loadstu();
        $("tbody tr:nth-child(odd)").css("background", "#CCF");    //奇偶行变色
    });
</script>
</html>